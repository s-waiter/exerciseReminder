# 在线更新技术方案设计 (2026-01-31) - 修订版 v2

## 1. 需求变更分析
- **原计划**：检测到更新后主动通知用户。
- **新需求**：**零打扰 (Zero Disturbance)**。
    - 检测到更新时，仅通过界面图标闪烁提示。
    - 点击图标无更新 -> Toast 提示“已是最新”。
    - 点击图标有更新 -> 弹出确认对话框 -> 确认后显示进度。

## 2. 方案产出
- 已更新核心技术文档：`technical_plan_auto_update.md`

### 核心流程修订
1.  **静默检查**：程序启动时后台检查 `version.json`。
2.  **视觉提示**：
    - 若有新版本：主界面“刷新/设置”图标开始呼吸闪烁 (Opacity Animation)。
    - 若无新版本：图标保持静止。
3.  **用户交互**：
    - **点击图标**：
        - **无更新**：调用 `toast.show("当前已是最新版本")`。
        - **有更新**：弹出自定义 `UpdateDialog`，显示更新日志，询问是否更新。
4.  **更新执行**：
    - 用户确认后，主界面显示下载进度。
    - 下载完成后，启动 `Updater.exe` 并退出主程序进行覆盖安装。

## 3. 下一步行动
1.  **UI 开发**：
    - 在 `Main.qml` 恢复/添加功能图标。
    - 实现图标的呼吸闪烁动画。
    - 开发 `UpdateDialog` 组件。
2.  **逻辑开发**：
    - 修改 `UpdateManager` 以支持静默检查模式。
    - 实现下载进度的信号传递。
