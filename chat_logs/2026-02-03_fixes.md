# Chat Log - 2026-02-03

## User Requests
1. Fix identical highlight behavior for Focus stats.
2. Fix Motion stats showing 0 and missing trajectory.
3. Add detail bubbles for highlighted segments.
4. Clarify "Manual" vs "Auto" record definitions.
5. Fix 3-second blank period after "Finish Exercise".

## Changes Made
### ActivityDashboard.qml
- **Stats Model**: Standardized all rows to use `filterMinDuration: -1` and `filterStartTime: -1` as sentinels.
- **Filtering Logic**: Updated `onPaint` to handle `-1` sentinels for precise filtering.
- **Detail Bubbles**: Added Canvas drawing code to render detail bubbles when `highlightFilter.startTime` is set.
- **Auto Refresh**: Added `onVisibleChanged` handler to call `refreshData()`, ensuring stats are up-to-date when window opens.
- **Duration Format**: Updated `formatDuration` to show seconds (e.g., "45ç§’") for durations < 1 minute.
- **Trajectory Visibility**: Enforced minimum bar width of 2px to ensure short sessions are visible.

### OverlayWindow.qml
- **Immediate Start**: Added `requestStartWork()` signal emission in `finishBtn.onClicked` to bypass the 3-second feedback animation delay. This ensures the "Work" timer starts immediately.

### Main.qml
- **Signal Handling**: Added `onRequestStartWork` handler to call `timerEngine.startWork()`.

### Core Logic (ActivityLogger/TimerEngine)
- **Manual Record Revert**: Rolled back redundant `recordExercise` signal/slot logic. The system now relies entirely on `TimerEngine` state transitions (Rest -> Focus) to trigger `ActivityLogger` recording, ensuring data consistency and preventing duplication.

## Verification
- **Highlighting**: Focus stats now correctly highlight segments based on duration (>30min) or specific start times (Longest Focus).
- **Motion Stats**: "0" values fixed by `formatDuration` update (showing seconds) and `onVisibleChanged` auto-refresh.
- **Trajectory**: Visible due to min-width enforcement.
- **Blank Period**: Eliminated by `requestStartWork()` call.

## Remaining Tasks
- None. All requests addressed.
